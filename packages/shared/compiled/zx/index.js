(function(){var e={154:function(e,t,r){var n=r(781);var i=["write","end","destroy"];var o=["resume","pause"];var s=["data","close"];var u=Array.prototype.slice;e.exports=duplex;function forEach(e,t){if(e.forEach){return e.forEach(t)}for(var r=0;r<e.length;r++){t(e[r],r)}}function duplex(e,t){var r=new n;var a=false;forEach(i,proxyWriter);forEach(o,proxyReader);forEach(s,proxyStream);t.on("end",handleEnd);e.on("drain",(function(){r.emit("drain")}));e.on("error",reemit);t.on("error",reemit);r.writable=e.writable;r.readable=t.readable;return r;function proxyWriter(t){r[t]=method;function method(){return e[t].apply(e,arguments)}}function proxyReader(e){r[e]=method;function method(){r.emit(e);var n=t[e];if(n){return n.apply(t,arguments)}t.emit(e)}}function proxyStream(e){t.on(e,reemit);function reemit(){var t=u.call(arguments);t.unshift(e);r.emit.apply(r,t)}}function handleEnd(){if(a){return}a=true;var e=u.call(arguments);e.unshift("end");r.emit.apply(r,e)}function reemit(e){r.emit("error",e)}}},147:function(e,t,r){var n=r(781).Stream,i=t,o=r(405),s=r(724),u=r(154),a=r(646),c=r(310),f=r(891),l=r(650),d=global.setImmediate||process.nextTick;i.Stream=n;i.through=o;i.from=s;i.duplex=u;i.map=a;i.pause=c;i.split=f;i.pipeline=i.connect=i.pipe=l;i.concat=i.merge=function(){var e=[].slice.call(arguments);if(e.length===1&&e[0]instanceof Array){e=e[0]}var t=new n;t.setMaxListeners(0);var r=0;t.writable=t.readable=true;if(e.length){e.forEach((function(n){n.pipe(t,{end:false});var i=false;n.on("end",(function(){if(i)return;i=true;r++;if(r==e.length)t.emit("end")}))}))}else{process.nextTick((function(){t.emit("end")}))}t.write=function(e){this.emit("data",e)};t.destroy=function(){e.forEach((function(e){if(e.destroy)e.destroy()}))};return t};i.writeArray=function(e){if("function"!==typeof e)throw new Error("function writeArray (done): done must be function");var t=new n,r=[],i=false;t.write=function(e){r.push(e)};t.end=function(){i=true;e(null,r)};t.writable=true;t.readable=false;t.destroy=function(){t.writable=t.readable=false;if(i)return;e(new Error("destroyed before end"),r)};return t};i.readArray=function(e){var t=new n,r=0,i=false,o=false;t.readable=true;t.writable=false;if(!Array.isArray(e))throw new Error("event-stream.read expects an array");t.resume=function(){if(o)return;i=false;var n=e.length;while(r<n&&!i&&!o){t.emit("data",e[r++])}if(r==n&&!o)o=true,t.readable=false,t.emit("end")};process.nextTick(t.resume);t.pause=function(){i=true};t.destroy=function(){o=true;t.emit("close")};return t};i.readable=function(e,t){var r=new n,i=0,o=false,s=false,u=false;r.readable=true;r.writable=false;if("function"!==typeof e)throw new Error("event-stream.readable expects async function");r.on("end",(function(){s=true}));function get(n,a){if(n){r.emit("error",n);if(!t)r.emit("end")}else if(arguments.length>1)r.emit("data",a);d((function(){if(s||o||u)return;try{u=true;e.call(r,i++,(function(){u=false;get.apply(null,arguments)}))}catch(e){r.emit("error",e)}}))}r.resume=function(){o=false;get()};process.nextTick(get);r.pause=function(){o=true};r.destroy=function(){r.emit("end");r.emit("close");s=true};return r};i.mapSync=function(e){return i.through((function write(t){var r;try{r=e(t)}catch(e){return this.emit("error",e)}if(r!==undefined)this.emit("data",r)}))};i.log=function(e){return i.through((function(t){var r=[].slice.call(arguments);if(e)console.error(e,t);else console.error(t);this.emit("data",t)}))};i.child=function(e){return i.duplex(e.stdin,e.stdout)};i.parse=function(e){var t=!!(e?e.error:false);return i.through((function(e){var r;try{if(e)r=JSON.parse(e.toString())}catch(r){if(t)return this.emit("error",r);return console.error(r,"attempting to parse:",e)}if(r!==undefined)this.emit("data",r)}))};i.stringify=function(){var e=r(300).Buffer;return i.mapSync((function(t){return JSON.stringify(e.isBuffer(t)?t.toString():t)+"\n"}))};i.replace=function(e,t){return i.pipeline(i.split(e),i.join(t))};i.join=function(e){if("function"===typeof e)return i.wait(e);var t=true;return i.through((function(r){if(!t)this.emit("data",e);t=false;this.emit("data",r);return true}))};i.wait=function(e){var t=[];return i.through((function(e){t.push(e)}),(function(){var r=Buffer.isBuffer(t[0])?Buffer.concat(t):t.join("");this.emit("data",r);this.emit("end");if(e)e(null,r)}))};i.pipeable=function(){throw new Error("[EVENT-STREAM] es.pipeable is deprecated")}},724:function(e,t,r){"use strict";var n=r(781);e.exports=function from(e){if(Array.isArray(e)){var t=0,r=e.length;return from((function(n){if(t<r)this.emit("data",e[t++]);else this.emit("end");return true}))}var i=new n,o=0;i.ended=false;i.started=false;i.readable=true;i.writable=false;i.paused=false;i.ended=false;i.pause=function(){i.started=true;i.paused=true};function next(){i.started=true;if(i.ended)return;while(!i.ended&&!i.paused&&e.call(i,o++,(function(){if(!i.ended&&!i.paused)process.nextTick(next)})));}i.resume=function(){i.started=true;i.paused=false;next()};i.on("end",(function(){i.ended=true;i.readable=false;process.nextTick(i.destroy)}));i.destroy=function(){i.ended=true;i.emit("close")};process.nextTick((function(){if(!i.started)i.resume()}));return i}},745:function(e,t,r){var n=r(358);var i;if(process.platform==="win32"||global.TESTING_WINDOWS){i=r(554)}else{i=r(138)}e.exports=isexe;isexe.sync=sync;function isexe(e,t,r){if(typeof t==="function"){r=t;t={}}if(!r){if(typeof Promise!=="function"){throw new TypeError("callback not provided")}return new Promise((function(r,n){isexe(e,t||{},(function(e,t){if(e){n(e)}else{r(t)}}))}))}i(e,t||{},(function(e,n){if(e){if(e.code==="EACCES"||t&&t.ignoreErrors){e=null;n=false}}r(e,n)}))}function sync(e,t){try{return i.sync(e,t||{})}catch(e){if(t&&t.ignoreErrors||e.code==="EACCES"){return false}else{throw e}}}},138:function(e,t,r){e.exports=isexe;isexe.sync=sync;var n=r(358);function isexe(e,t,r){n.stat(e,(function(e,n){r(e,e?false:checkStat(n,t))}))}function sync(e,t){return checkStat(n.statSync(e),t)}function checkStat(e,t){return e.isFile()&&checkMode(e,t)}function checkMode(e,t){var r=e.mode;var n=e.uid;var i=e.gid;var o=t.uid!==undefined?t.uid:process.getuid&&process.getuid();var s=t.gid!==undefined?t.gid:process.getgid&&process.getgid();var u=parseInt("100",8);var a=parseInt("010",8);var c=parseInt("001",8);var f=u|a;var l=r&c||r&a&&i===s||r&u&&n===o||r&f&&o===0;return l}},554:function(e,t,r){e.exports=isexe;isexe.sync=sync;var n=r(358);function checkPathExt(e,t){var r=t.pathExt!==undefined?t.pathExt:process.env.PATHEXT;if(!r){return true}r=r.split(";");if(r.indexOf("")!==-1){return true}for(var n=0;n<r.length;n++){var i=r[n].toLowerCase();if(i&&e.substr(-i.length).toLowerCase()===i){return true}}return false}function checkStat(e,t,r){if(!e.isSymbolicLink()&&!e.isFile()){return false}return checkPathExt(t,r)}function isexe(e,t,r){n.stat(e,(function(n,i){r(n,n?false:checkStat(i,e,t))}))}function sync(e,t){return checkStat(n.statSync(e),e,t)}},646:function(e,t,r){var n=r(781).Stream;e.exports=function(e,t){var r=new n,i=this,o=0,s=0,u=false,a=false,c=false,f=0,l=false;this.opts=t||{};var d=this.opts.failures?"failure":"error";var p={};r.writable=true;r.readable=true;function queueData(e,t){var n=f+1;if(t===n){if(e!==undefined){r.emit.apply(r,["data",e])}f++;n++}else{p[t]=e}if(p.hasOwnProperty(n)){var i=p[n];delete p[n];return queueData(i,n)}s++;if(o===s){if(a)a=false,r.emit("drain");if(u)end()}}function next(e,t,n){if(c)return;l=true;if(!e||i.opts.failures){queueData(t,n)}if(e){r.emit.apply(r,[d,e])}l=false}function wrappedMapper(t,r,n){return e.call(null,t,(function(e,t){n(e,t,r)}))}r.write=function(e){if(u)throw new Error("map stream is not writable");l=false;o++;try{var t=wrappedMapper(e,o,next);a=t===false;return!a}catch(e){if(l)throw e;next(e);return!a}};function end(e){u=true;r.writable=false;if(e!==undefined){return queueData(e,o)}else if(o==s){r.readable=false,r.emit("end"),r.destroy()}}r.end=function(e){if(u)return;end()};r.destroy=function(){u=c=true;r.writable=r.readable=a=false;process.nextTick((function(){r.emit("close")}))};r.pause=function(){a=true};r.resume=function(){a=false};return r}},310:function(e,t,r){e.exports=r(405)},251:function(e,t,r){"use strict";var n=r(81).spawn,i=r(147);e.exports=function childrenOfPid(e,t){var r=null;if(typeof t!=="function"){throw new Error("childrenOfPid(pid, callback) expects callback")}if(typeof e==="number"){e=e.toString()}var o;if(process.platform==="win32"){o=n("wmic.exe",["PROCESS","GET","Name,ProcessId,ParentProcessId,Status"])}else{o=n("ps",["-A","-o","ppid,pid,stat,comm"])}i.connect(o.stdout,i.split(),i.map((function(e,t){var n=e.trim().split(/\s+/);if(!r){r=n;r=r.map(normalizeHeader);return t()}var i={};var o=r.slice();while(o.length){i[o.shift()]=o.length?n.shift():n.join(" ")}return t(null,i)})),i.writeArray((function(r,n){var i={},o=[];i[e]=true;n.forEach((function(e){if(i[e.PPID]){i[e.PID]=true;o.push(e)}}));t(null,o)}))).on("error",t)};function normalizeHeader(e){if(process.platform!=="win32"){return e}switch(e){case"Name":return"COMMAND";break;case"ParentProcessId":return"PPID";break;case"ProcessId":return"PID";break;case"Status":return"STAT";break;default:throw new Error("Unknown process listing header: "+e)}}},891:function(e,t,r){var n=r(405);var i=r(576).StringDecoder;e.exports=split;function split(e,t,r){var o=new i;var s="";var u=r&&r.maxLength;if("function"===typeof e)t=e,e=null;if(!e)e=/\r?\n/;function emit(e,r){if(t){try{r=t(r)}catch(t){return e.emit("error",t)}if("undefined"!==typeof r)e.queue(r)}else e.queue(r)}function next(t,r){var n=((s!=null?s:"")+r).split(e);s=n.pop();if(u&&s.length>u)t.emit("error",new Error("maximum buffer reached"));for(var i=0;i<n.length;i++){var o=n[i];emit(t,o)}}return n((function(e){next(this,o.write(e))}),(function(){if(o.end)next(this,o.end());if(s!=null)emit(this,s);this.queue(null)}))}},650:function(e,t,r){var n=r(154);e.exports=function(){var e=[].slice.call(arguments),t=e[0],r=e[e.length-1],i=n(t,r);if(e.length==1)return e[0];else if(!e.length)throw new Error("connect called with empty args");function recurse(e){if(e.length<2)return;e[0].pipe(e[1]);recurse(e.slice(1))}recurse(e);function onerror(){var e=[].slice.call(arguments);e.unshift("error");i.emit.apply(i,e)}for(var o=1;o<e.length-1;o++)e[o].on("error",onerror);return i}},405:function(e,t,r){var n=r(781);t=e.exports=through;through.through=through;function through(e,t,r){e=e||function(e){this.queue(e)};t=t||function(){this.queue(null)};var i=false,o=false,s=[],u=false;var a=new n;a.readable=a.writable=true;a.paused=false;a.autoDestroy=!(r&&r.autoDestroy===false);a.write=function(t){e.call(this,t);return!a.paused};function drain(){while(s.length&&!a.paused){var e=s.shift();if(null===e)return a.emit("end");else a.emit("data",e)}}a.queue=a.push=function(e){if(u)return a;if(e===null)u=true;s.push(e);drain();return a};a.on("end",(function(){a.readable=false;if(!a.writable&&a.autoDestroy)process.nextTick((function(){a.destroy()}))}));function _end(){a.writable=false;t.call(a);if(!a.readable&&a.autoDestroy)a.destroy()}a.end=function(e){if(i)return;i=true;if(arguments.length)a.write(e);_end();return a};a.destroy=function(){if(o)return;o=true;i=true;s.length=0;a.writable=a.readable=false;a.emit("close");return a};a.pause=function(){if(a.paused)return;a.paused=true;return a};a.resume=function(){if(a.paused){a.paused=false;a.emit("resume")}drain();if(!a.paused)a.emit("drain");return a};return a}},200:function(e,t,r){const n=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys";const i=r(17);const o=n?";":":";const s=r(745);const getNotFoundError=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"});const getPathInfo=(e,t)=>{const r=t.colon||o;const i=e.match(/\//)||n&&e.match(/\\/)?[""]:[...n?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(r)];const s=n?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"";const u=n?s.split(r):[""];if(n){if(e.indexOf(".")!==-1&&u[0]!=="")u.unshift("")}return{pathEnv:i,pathExt:u,pathExtExe:s}};const which=(e,t,r)=>{if(typeof t==="function"){r=t;t={}}if(!t)t={};const{pathEnv:n,pathExt:o,pathExtExe:u}=getPathInfo(e,t);const a=[];const step=r=>new Promise(((o,s)=>{if(r===n.length)return t.all&&a.length?o(a):s(getNotFoundError(e));const u=n[r];const c=/^".*"$/.test(u)?u.slice(1,-1):u;const f=i.join(c,e);const l=!c&&/^\.[\\\/]/.test(e)?e.slice(0,2)+f:f;o(subStep(l,r,0))}));const subStep=(e,r,n)=>new Promise(((i,c)=>{if(n===o.length)return i(step(r+1));const f=o[n];s(e+f,{pathExt:u},((o,s)=>{if(!o&&s){if(t.all)a.push(e+f);else return i(e+f)}return i(subStep(e,r,n+1))}))}));return r?step(0).then((e=>r(null,e)),r):step(0)};const whichSync=(e,t)=>{t=t||{};const{pathEnv:r,pathExt:n,pathExtExe:o}=getPathInfo(e,t);const u=[];for(let a=0;a<r.length;a++){const c=r[a];const f=/^".*"$/.test(c)?c.slice(1,-1):c;const l=i.join(f,e);const d=!f&&/^\.[\\\/]/.test(e)?e.slice(0,2)+l:l;for(let e=0;e<n.length;e++){const r=d+n[e];try{const e=s.sync(r,{pathExt:o});if(e){if(t.all)u.push(r);else return r}}catch(e){}}}if(t.all&&u.length)return u;if(t.nothrow)return null;throw getNotFoundError(e)};e.exports=which;which.sync=whichSync},300:function(e){"use strict";e.exports=require("buffer")},81:function(e){"use strict";e.exports=require("child_process")},358:function(e){"use strict";e.exports=require("fs")},17:function(e){"use strict";e.exports=require("path")},781:function(e){"use strict";e.exports=require("stream")},576:function(e){"use strict";e.exports=require("string_decoder")}};var t={};function __nccwpck_require__(r){var n=t[r];if(n!==undefined){return n.exports}var i=t[r]={exports:{}};var o=true;try{e[r](i,i.exports,__nccwpck_require__);o=false}finally{if(o)delete t[r]}return i.exports}!function(){__nccwpck_require__.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};__nccwpck_require__.d(t,{a:t});return t}}();!function(){__nccwpck_require__.d=function(e,t){for(var r in t){if(__nccwpck_require__.o(t,r)&&!__nccwpck_require__.o(e,r)){Object.defineProperty(e,r,{enumerable:true,get:t[r]})}}}}();!function(){__nccwpck_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}();!function(){__nccwpck_require__.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})}}();if(typeof __nccwpck_require__!=="undefined")__nccwpck_require__.ab=__dirname+"/";var r={};!function(){"use strict";__nccwpck_require__.r(r);__nccwpck_require__.d(r,{$:function(){return $},ProcessOutput:function(){return ProcessOutput},ProcessPromise:function(){return ProcessPromise},argv:function(){return d},cd:function(){return cd},nothrow:function(){return nothrow},sleep:function(){return l}});var e=require("../chalk");var t=__nccwpck_require__.n(e);var n=require("../yargs-parser");var i=__nccwpck_require__.n(n);var o=__nccwpck_require__(81);var s=__nccwpck_require__(251);var u=__nccwpck_require__.n(s);var a=require("util");var c=__nccwpck_require__(200);var f=__nccwpck_require__.n(c);const l=(0,a.promisify)(setTimeout);const d=i()(process.argv.slice(2));const p=(0,a.promisify)(u());function $(e,...t){let{verbose:r,shell:n,prefix:i}=$;let s=(new Error).stack.split(/^\s*at\s/m)[2].trim();let u=e[0],a=0;while(a<t.length){let r;if(Array.isArray(t[a])){r=t[a].map((e=>$.quote(substitute(e)))).join(" ")}else{r=$.quote(substitute(t[a]))}u+=r+e[++a]}let c,f;let l=new ProcessPromise(((...e)=>[c,f]=e));l._run=()=>{if(l.child)return;if(l._prerun)l._prerun();if(r){printCmd(u)}let e=(0,o.spawn)(i+u,{cwd:process.cwd(),shell:typeof n==="string"?n:true,stdio:[l._inheritStdin?"inherit":"pipe","pipe","pipe"],windowsHide:true});e.on("exit",(r=>{e.on("close",(()=>{let e=new ProcessOutput({code:r,stdout:t,stderr:a,combined:d,message:`${a||"\n"}    at ${s}\n    exit code: ${r}`+(exitCodeInfo(r)?" ("+exitCodeInfo(r)+")":"")});(r===0||l._nothrow?c:f)(e);l._resolved=true}))}));let t="",a="",d="";let onStdout=e=>{if(r)process.stdout.write(e);t+=e;d+=e};let onStderr=e=>{if(r)process.stderr.write(e);a+=e;d+=e};if(!l._piped)e.stdout.on("data",onStdout);e.stderr.on("data",onStderr);l.child=e;if(l._postrun)l._postrun()};setTimeout(l._run,0);return l}$.verbose=!d.quiet;if(typeof d.shell==="string"){$.shell=d.shell;$.prefix=""}else{try{$.shell=f().sync("bash");$.prefix="set -euo pipefail;"}catch(e){$.prefix=""}}if(typeof d.prefix==="string"){$.prefix=d.prefix}$.quote=quote;function cd(e){if($.verbose)console.log("$",colorize(`cd ${e}`));process.chdir(e)}function nothrow(e){e._nothrow=true;return e}class ProcessPromise extends Promise{child=undefined;_nothrow=false;_resolved=false;_inheritStdin=true;_piped=false;_prerun=undefined;_postrun=undefined;get stdin(){this._inheritStdin=false;this._run();return this.child.stdin}get stdout(){this._inheritStdin=false;this._run();return this.child.stdout}get stderr(){this._inheritStdin=false;this._run();return this.child.stderr}get exitCode(){return this.then((e=>e.exitCode)).catch((e=>e.exitCode))}then(e,t){if(this._run)this._run();return super.then(e,t)}pipe(e){if(typeof e==="string"){throw new Error("The pipe() method does not take strings. Forgot $?")}if(this._resolved===true){throw new Error("The pipe() method shouldn't be called after promise is already resolved!")}this._piped=true;if(e instanceof ProcessPromise){e._inheritStdin=false;e._prerun=this._run;e._postrun=()=>this.stdout.pipe(e.child.stdin);return e}else{this._postrun=()=>this.stdout.pipe(e);return this}}async kill(e="SIGTERM"){this.catch((e=>e));let t=await p(this.child.pid);for(const r of t){try{process.kill(r.PID,e)}catch(e){}}try{process.kill(this.child.pid,e)}catch(e){}}}class ProcessOutput extends Error{#e=0;#t="";#r="";#n="";constructor({code:e,stdout:t,stderr:r,combined:n,message:i}){super(i);this.#e=e;this.#t=t;this.#r=r;this.#n=n}toString(){return this.#n}get stdout(){return this.#t}get stderr(){return this.#r}get exitCode(){return this.#e}[a.inspect.custom](){let stringify=(e,t)=>e.length===0?"''":t((0,a.inspect)(e));return`ProcessOutput {\n  stdout: ${stringify(this.stdout,t().green)},\n  stderr: ${stringify(this.stderr,t().red)},\n  exitCode: ${(this.exitCode===0?t().green:t().red)(this.exitCode)}${exitCodeInfo(this.exitCode)?t().grey(" ("+exitCodeInfo(this.exitCode)+")"):""}\n}`}}function printCmd(e){if(/\n/.test(e)){console.log(e.split("\n").map(((e,t)=>(t===0?"$":">")+" "+colorize(e))).join("\n"))}else{console.log("$",colorize(e))}}function colorize(e){return e.replace(/^[\w_.-]+(\s|$)/,(e=>t().greenBright(e)))}function substitute(e){if(e instanceof ProcessOutput){return e.stdout.replace(/\n$/,"")}return`${e}`}function quote(e){if(/^[a-z0-9/_.-]+$/i.test(e)||e===""){return e}return`$'`+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0")+`'`}function exitCodeInfo(e){return{2:"Misuse of shell builtins",126:"Invoked command cannot execute",127:"Command not found",128:"Invalid exit argument",129:"Hangup",130:"Interrupt",131:"Quit and dump core",132:"Illegal instruction",133:"Trace/breakpoint trap",134:"Process aborted",135:'Bus error: "access to undefined portion of memory object"',136:'Floating point exception: "erroneous arithmetic operation"',137:"Kill (terminate immediately)",138:"User-defined 1",139:"Segmentation violation",140:"User-defined 2",141:"Write to pipe with no one reading",142:"Signal raised by alarm",143:"Termination (request to terminate)",145:"Child process terminated, stopped (or continued*)",146:"Continue if stopped",147:"Stop executing temporarily",148:"Terminal stop signal",149:'Background process attempting to read from tty ("in")',150:'Background process attempting to write to tty ("out")',151:"Urgent data available on socket",152:"CPU time limit exceeded",153:"File size limit exceeded",154:'Signal raised by timer counting virtual time: "virtual timer expired"',155:"Profiling timer expired",157:"Pollable event",159:"Bad syscall"}[e]}}();module.exports=r})();